<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/static/js/app.css">
    <link rel="stylesheet" href='/static/main.css'/>
    <script type="module" src="/static/js/app.js"></script>
    <title>{{name}}GPT</title>
</head>
<body>

<div id="header">
    <div class="header-inner"><a href="/" id="logo-link"><strong>{{name}}</strong>GPT</a></div>
    <div class="header-inner">
        <label>
            <strong>Model</strong>:
            <select id="model-change">
                {% for name in models %}
                {% if name == selected_model %}
                <option selected="selected" value="{{ name }}">{{ name }}</option>
                {% else %}
                <option value="{{ name }}">{{ name }}</option>
                {% endif %}
                {% endfor %}
            </select>
        </label>
        <a href="#" id="reset-button"><img
                src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQxIDM0IiBoZWlnaHQ9IjM0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA0MSAzNCIgd2lkdGg9IjQxcHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik0zMy45NDksMTZDMzMuNDI5LDcuMDgsMjYuMDUxLDAsMTcsMEM3LjYxMSwwLDAsNy42MTEsMCwxN3M3LjYxMSwxNywxNywxN3YtNmMtNi4wNzUsMC0xMS00LjkyNS0xMS0xMSAgUzEwLjkyNSw2LDE3LDZjNS43MzcsMCwxMC40NDMsNC4zOTQsMTAuOTQ5LDEwaC02Ljg0OUwzMSwyNS44OTlMNDAuODk5LDE2SDMzLjk0OXoiIGZpbGw9IiMyMzFGMjAiLz48L3N2Zz4="
                alt="refresh" width="16" height="16"></a>
    </div>

</div>
<div class="container">
    <div id="extra-content">
        {{ extra_content|safe }}
    </div>
    <div id="chat">

    </div>
    <div class="chat-instruction">Chat here</div>
    <div class="chat-input">
        <div id="input-box" class="input-box" contenteditable="true" data-text="Type here..."></div>
        <button id="stop-generating" disabled="disabled">
            Stop generating
        </button>
        <div class="footer">
            <div class="footer-buttons">
                <strong>Embeddings</strong>:

                &nbsp;
                <a href="#popup2" id="document-qa-button">PDF</a>
                &nbsp;|&nbsp;
                <a href="#popup2" id="source-qa-button">Source code</a>
                &nbsp;|&nbsp;
                <a href="#popup2" id="sql-qa-button">SQL</a>


                <a href="#popup1" id="help-button">Help</a>
            </div>
        </div>
    </div>
</div>


<div id="popup1" class="overlay">
    <div class="popup">
        <h2>Help</h2>
        <a class="close" href="#">&times;</a>
        <div class="content">
            <div>
                <div>
                    <h1>Issues?</h1>
                    Open issue on <a href="http://gitea.cry/wengert/{{name}}GPT" target="_blank">gitea.cry/wengert/{{name}}GPT</a>
                </div>
                <div>
                    <h1>Questions?</h1>
                    Ask <a href="mailto:wengert@yoda.cry">wengert@yoda.cry</a>
                </div>
                <div>
                    <h1>Models</h1>
                    In general: More parameters are better, but slower. Uncensored models have (almost) no ethical or
                    moral barriers. Use at your own risk.
                    <ul>
                        {% for name in models %}
                        <li> {{ name }}
                            {% if name == selected_model %}
                            (<strong>default</strong>)
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                    <strong>A note about quantization:</strong> The q5_0 is a method to quantize the model weights
                    (16bits floating point) to
                    for example 5 bit. The quality will be slightly less but speed and memory consumption are far
                    better.
                </div>

                <div>
                    <h1>News</h1>
                    <ul>
                        <li>15.5.2023 Changed all models because of breaking change in the library</li>
                        <li>10.5.2023 Simple {{name}}GPT online</li>
                    </ul>
                </div>

                <div>
                    <h1>Coming up next</h1>
                    <ul>
                        <li>Make text generation cancellable</li>
                        <li>Document embedding (i.e. ask your PDF)</li>
                        <li>Source code embedding (i.e. ask your code)</li>
                        <li>More models</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="popup2" class="overlay">
    <div class="popup">
        <h2>Upload</h2>
        <a class="close" href="#">&times;</a>
        <div class="content">
            <div>
                <form method="post" enctype="multipart/form-data" id="upload-pdf">
                    <div>
                        <label>
                            Give a name to this job
                            <input type="text" value="" placeholder="Give me a name" id="pdf-jobname" required>
                        </label>
                    </div>
                    <div>
                        <label>
                            Choose files<br>
                            <input id="pdf-file" type="file" accept="application/pdf" required>
                        </label>
                    </div>
                    <div>
                        <button>Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>